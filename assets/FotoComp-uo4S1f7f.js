import{a as ne,B as j,u as de,_ as ue,P as re}from"./ActionsAndComment-DrReJa_G.js";import{r as _,o as O,a as n,c as d,b as o,t as m,F as E,j as $,e as U,f as B,l as x,p as ce,d as me,w as ve,g as W,h as pe,u as e,i as A,n as fe,k as be,m as _e}from"./index-BeFwxGq7.js";import{f as G,a as Pe}from"./postService-CZlftJwb.js";const ge={class:"album-view"},Ce={class:"thumbnails"},ke=["onClick"],he=["src","alt"],ye={class:"modal-content"},Ue=["src","alt"],we={__name:"AlbumView",props:{albumId:{type:Number,required:!0},albumTitle:{type:String,required:!0}},emits:["close"],setup(w,{emit:C}){const k=w,r=C,v=_([]),p=_(!1),c=_(null),f=_(null),b=async()=>{try{v.value=await G("photos"),v.value=v.value.filter(u=>u.albumId===k.albumId)}catch(u){console.error("Ошибка при загрузке фотографий:",u)}},F=u=>{c.value=u,p.value=!0},V=()=>{r("close")};return O(b),(u,h)=>{const M=j;return n(),d("div",{class:"album-view-wrapper",ref_key:"albumWrapper",ref:f,onClick:ce(V,["self"])},[o("div",ge,[o("h2",null,"Альбом: "+m(w.albumTitle),1),o("div",Ce,[(n(!0),d(E,null,$(v.value,i=>(n(),d("div",{key:i.id,class:"thumbnail",onClick:D=>F(i)},[o("img",{src:i.thumbnailUrl,alt:i.title},null,8,he),o("p",null,m(i.title),1)],8,ke))),128))]),U(M,{modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=i=>p.value=i),"hide-footer":"",size:"lg",title:"Просмотр изображения"},{default:B(()=>{var i;return[o("div",ye,[c.value?(n(),d("img",{key:0,src:c.value.url,alt:c.value.title},null,8,Ue)):x("",!0),o("p",null,m((i=c.value)==null?void 0:i.title),1)])]}),_:1},8,["modelValue"])])],512)}}},Fe=ne(we,[["__scopeId","data-v-ef1f74c0"]]),Ve={class:"FotoComp"},Me={class:"posts-control"},Se=["value"],Ae={class:"posts-list"},Ee=["value"],$e={key:0,class:"bulk-actions"},Be={class:"post-header"},xe=["onClick"],De={class:"post-user"},qe=me({__name:"FotoComp",setup(w){let{posts:C,favorites:k,selectedPosts:r,editingPostId:v,editedPost:p,activeComments:c,perPage:f,modalVisible:b,modalTitle:F,modalMessage:V,cancelEditPost:u,deletePost:h,toggleFavorite:M,editPost:i,saveEditPost:D,updatePerPage:S,confirmModalAction:T,cancelModalAction:I,openModal:N,showComments:H,displayedPosts:J,updateFilteredPosts:P,comments:K,selectedUsers:y,filterFavorites:Q,sortField:X,sortDirection:Y}=de();const q=_([]),z=[10,20,50,100,-1],g=_(null),Z=a=>{g.value={id:a.id,title:a.title}},ee=async()=>{C.value=await G("photos")},te=a=>{y.value.includes(a)?y.value=y.value.filter(t=>t!==a):y.value.push(a),P()},oe=a=>{Q.value=a,P()},se=a=>{X.value=a,P()},le=a=>{Y.value=a,P()},ae=async()=>{q.value=await Pe()};return O(()=>{ee(),ae(),ve(C,P)}),(a,t)=>{const ie=j;return n(),d("div",Ve,[o("div",Me,[t[10]||(t[10]=o("label",{class:"header-title",for:"perPageSelect"},"Количество постов на странице:",-1)),W(o("select",{id:"perPageSelect","onUpdate:modelValue":t[0]||(t[0]=s=>A(f)?f.value=s:f=s),onChange:t[1]||(t[1]=(...s)=>e(S)&&e(S)(...s))},[(n(),d(E,null,$(z,s=>o("option",{key:s,value:s},m(s===-1?"Все":s),9,Se)),64))],544),[[pe,e(f),void 0,{number:!0}]])]),U(ue,{perPageOptions:z,users:q.value,onUpdatePerPage:e(S),onUpdateSelectedUsers:te,onUpdateFilterFavorites:oe,onUpdateSortField:se,onUpdateSortDirection:le},null,8,["users","onUpdatePerPage"]),o("ul",Ae,[(n(!0),d(E,null,$(e(J),s=>{var L,R;return n(),d("li",{key:s.id,class:fe(["post-item",{"favorite-post":e(k).includes(s.id)}])},[W(o("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[2]||(t[2]=l=>A(r)?r.value=l:r=l),class:"select-post"},null,8,Ee),[[be,e(r)]]),e(r).includes(s.id)?(n(),d("div",$e,[o("button",{onClick:t[3]||(t[3]=l=>e(N)("delete"))},"Удалить выбранные"),o("button",{onClick:t[4]||(t[4]=l=>e(N)("favorite"))},"Добавить в избранное")])):x("",!0),U(ie,{modelValue:e(b),"onUpdate:modelValue":t[7]||(t[7]=l=>A(b)?b.value=l:b=l),title:e(F)},{footer:B(()=>[o("button",{onClick:t[5]||(t[5]=(...l)=>e(T)&&e(T)(...l))},"Подтвердить"),o("button",{onClick:t[6]||(t[6]=(...l)=>e(I)&&e(I)(...l))},"Отменить")]),default:B(()=>[o("p",null,m(e(V)),1)]),_:1},8,["modelValue","title"]),o("div",Be,[o("h3",{onClick:l=>Z(s)},m(s.title),9,xe),o("p",De,"Автор оказывается в запросе нет вывожу URL: "+m(s.url),1)]),U(re,{post:s,"active-comments":e(c),"editing-post-id":e(v),favorites:e(k),"post-comments":((L=e(K).find(l=>l.postId===s.id))==null?void 0:L.comments)||[],"edited-body":(R=e(p))==null?void 0:R.body,onUpdateEditedBody:t[8]||(t[8]=l=>e(p).body=l),onToggleComments:e(H),onSaveEdit:e(D),onCancelEdit:e(u),onEditPost:e(i),onDeletePost:e(h),onToggleFavorite:e(M)},null,8,["post","active-comments","editing-post-id","favorites","post-comments","edited-body","onToggleComments","onSaveEdit","onCancelEdit","onEditPost","onDeletePost","onToggleFavorite"])],2)}),128))]),g.value?(n(),_e(Fe,{key:0,"album-id":g.value.id,"album-title":g.value.title,onClose:t[9]||(t[9]=s=>g.value=null)},null,8,["album-id","album-title"])):x("",!0)])}}});export{qe as default};
