import{u as he,d as Ie,g as H}from"./postService-CZlftJwb.js";import{s as n,D as Oe,d as Re,$,a1 as Ce,a0 as Ae,a5 as L,w as Ue,a as m,c as B,F as we,j as De,_ as A,S as X,m as ye,f as Ve,V as Fe,n as ke,u as U,U as Z,t as j,H as N}from"./index-BeFwxGq7.js";const Me="ArrowDown",ze="ArrowLeft",Ge="ArrowRight",He="ArrowUp",$e=c=>n(()=>{const v=Oe(c);return v?`justify-content-${v}`:""}),K=(c,{preventDefault:v=!0,propagation:w=!1,immediatePropagation:D=!1}={})=>{v&&c.preventDefault(),w&&c.stopPropagation(),D&&c.stopImmediatePropagation()},Xe=["aria-disabled","aria-label"],W=20,q=0,et=Re({__name:"BPagination",props:$({align:{default:"start"},ariaControls:{default:void 0},ariaLabel:{default:"Pagination"},disabled:{type:Boolean,default:!1},ellipsisClass:{default:void 0},ellipsisText:{default:"…"},firstClass:{default:void 0},firstNumber:{type:Boolean,default:!1},firstText:{default:"«"},noEllipsis:{type:Boolean,default:!1},noGotoEndButtons:{type:Boolean,default:!1},labelFirstPage:{default:"Go to first page"},labelLastPage:{default:"Go to last page"},labelNextPage:{default:"Go to next page"},labelPage:{default:"Go to page"},labelPrevPage:{default:"Go to previous page"},lastClass:{default:void 0},lastNumber:{type:Boolean,default:!1},lastText:{default:"»"},limit:{default:5},nextClass:{default:void 0},nextText:{default:"›"},pageClass:{default:void 0},perPage:{default:W},pills:{type:Boolean,default:!1},prevClass:{default:void 0},prevText:{default:"‹"},size:{default:void 0},totalRows:{default:q}},{modelValue:{default:1},modelModifiers:{}}),emits:$(["page-click"],["update:modelValue"]),setup(c,{emit:v}){const l=he(c,"BPagination"),J=v,h=Ce(c,"modelValue"),Q=Ae("_pageElements"),y=L(()=>l.limit,{nanToZero:!0,method:"parseInt"}),Y=L(()=>l.perPage,{nanToZero:!0,method:"parseInt"}),V=L(()=>l.totalRows,{nanToZero:!0,method:"parseInt"}),ee=L(h,{nanToZero:!0,method:"parseInt"}),F=n(()=>Math.max(Y.value||W,1)),te=n(()=>Math.max(V.value||q,0)),u=n(()=>Math.ceil(te.value/F.value)),g=n(()=>l.align==="fill"),ae=n(()=>l.align==="fill"?"start":l.align),le=$e(ae),I=t=>t===r.value,se=t=>l.disabled?null:I(t)?"0":"-1",b=t=>l.disabled||I(t)||r.value<1||t<1||t>u.value,ne=n(()=>b(1)),oe=n(()=>b(r.value-1)),ie=n(()=>b(u.value)),ue=n(()=>b(r.value+1)),k=({page:t,classVal:a,disabled:e,slotName:d,textValue:s,tabIndex:o,label:i,position:z,isActive:G,role:Se,hidden:Le,isSmHidden:Be})=>({li:{class:["page-item",{active:G,disabled:e,"bv-d-sm-down-none":Be,"flex-fill":g.value,"d-flex":g.value&&!e},a],role:Se,"aria-hidden":Le},button:{is:e?"span":"button",class:["page-link","text-center",{"flex-grow-1":!e&&g.value}],"aria-label":i,"aria-controls":l.ariaControls||void 0,"aria-disabled":e?!0:void 0,"aria-posinset":z,"aria-setsize":z?u.value:void 0,role:"menuitem",type:e?void 0:"button",tabindex:e?void 0:o},text:{name:d,active:G,value:s??t,page:t,disabled:e,index:t-1,content:s?void 0:t},clickHandler:Ne=>pe(Ne,t)}),x=({page:t,classVal:a,disabled:e,slotName:d,textValue:s,label:o})=>k({page:t,classVal:a,disabled:e,slotName:d,textValue:s,label:o,tabIndex:"-1"}),O=(t,a)=>k({page:t,disabled:l.disabled,classVal:l.pageClass,slotName:"page",label:l.labelPage?`${l.labelPage} ${t}`:void 0,tabIndex:se(t)??void 0,position:t,isActive:I(t),isSmHidden:a}),re=n(()=>x({page:1,disabled:ne.value,classVal:l.firstClass,slotName:"first-text",textValue:l.firstText,label:l.labelFirstPage})),de=n(()=>x({page:Math.max(r.value-1,1),disabled:oe.value,classVal:l.prevClass,slotName:"prev-text",textValue:l.prevText,label:l.labelPrevPage})),ce=n(()=>x({page:Math.min(r.value+1,u.value),disabled:ue.value,classVal:l.nextClass,slotName:"next-text",textValue:l.nextText,label:l.labelNextPage})),fe=n(()=>x({page:u.value,disabled:ie.value,classVal:l.lastClass,slotName:"last-text",textValue:l.lastText,label:l.labelLastPage})),M=n(()=>({li:{class:["page-item","disabled","text-center","bv-d-sm-down-none",g.value?"flex-fill":"",l.ellipsisClass],role:"separator"},span:{class:["page-link"]}})),ve=n(()=>[le.value,{[`pagination-${l.size}`]:l.size!==void 0,"b-pagination-pills":l.pills}]),Te=n(()=>({pageSize:F.value,totalRows:V.value,numberOfPages:u.value})),pe=(t,a)=>{if(a===r.value)return;const e=new Ie("page-click",{cancelable:!0,target:t.target});J("page-click",e,a),!e.defaultPrevented&&(h.value=a)},P=t=>{const a=!!(t&&t.nodeType===Node.ELEMENT_NODE),e=a?t.hasAttribute("disabled"):null,d=a&&t.classList?t.classList.contains("disabled"):!1;return!a||t.disabled||e||d},_=()=>{var t;return((t=Q.value)==null?void 0:t.map(a=>a.children[0]).filter(a=>{if(a.getAttribute("display")==="none")return!1;const e=a.getBoundingClientRect();return!!(e&&e.height>0&&e.width>0)}))??[]},me=()=>{N(()=>{const t=_().find(a=>!P(a));t==null||t.focus()})},ge=()=>{N(()=>{var t;const a=_(),e=a.indexOf(H());e>0&&!P(a[e-1])&&((t=a[e-1])==null||t.focus())})},be=()=>{N(()=>{const t=_().reverse().find(a=>!P(a));t==null||t.focus()})},xe=()=>{N(()=>{var t;const a=_(),e=a.indexOf(H());e<a.length-1&&!P(a[e+1])&&((t=a[e+1])==null||t.focus())})},Pe=t=>{const{code:a,shiftKey:e}=t;a===ze||a===He?(K(t),e?me():ge()):(a===Ge||a===Me)&&(K(t),e?be():xe())},r=n(()=>{const t=ee.value||1;return t>u.value?u.value:t<1?1:t});Ue(Te,(t,a)=>{a.pageSize!==t.pageSize&&a.totalRows===t.totalRows&&(h.value=1)});const f=n(()=>l.noGotoEndButtons&&!l.firstNumber?1:0),E=n(()=>l.noGotoEndButtons&&!l.lastNumber?1:0),R=n(()=>f.value?0:1),C=n(()=>E.value?0:1),T=n(()=>l.firstNumber?1:0),p=n(()=>l.lastNumber?1:0),S=n(()=>Math.floor(y.value/2)),_e=n(()=>{const{value:t}=r,a=Ee.value.map(e=>{switch(e){case-1:return{id:e,...re.value};case-2:return{id:e,...de.value};case-3:return{id:e,...ce.value};case-4:return{id:e,...fe.value};case-5:case-6:return{id:e,...M.value};default:return{id:e,...O(e)}}});if(u.value>3){if(t>u.value-S.value-p.value){const e=2+R.value;a[e]={id:a[e].id,...O(a[e].id,!0)}}if(t<=S.value+T.value){const e=a.length-(3+C.value);a[e]={id:a[e].id,...O(a[e].id,!0)}}}return a}),Ee=n(()=>{const t=u.value,{value:a}=r,e=y.value,d=l.noEllipsis||e<=3;if(t<e+T.value+p.value)return[!T.value&&!f.value?-1:null,-2,...Array.from({length:t},(o,i)=>i+1),-3,!p.value&&!E.value?-4:null].filter(o=>o!==null);const s=Array.from({length:e+4-(f.value+E.value)});if(f.value?s[0]=-2:T.value?(s[0]=-2,s[1]=1):(s[0]=-1,s[1]=-2),E.value?s[s.length-1]=-3:p.value?(s[s.length-1]=-3,s[s.length-2]=t):(s[s.length-1]=-4,s[s.length-2]=-3),a<=S.value+T.value){for(let o=1;o<=e;o++)s[o+1-f.value]=o+T.value;d||(s[s.length-(2+C.value)]=-6)}if(a>t-S.value-p.value){const o=t-(e-1)-p.value;for(let i=0;i<e;i++)s[i+2-f.value]=o+i;d||(s[1+R.value]=-5)}if(!s[2]){const o=a-Math.floor(e/2);for(let i=0;i<e;i++)s[i+2-f.value]=o+i;d||(s[1+R.value]=-5,s[s.length-(2+C.value)]=-6)}return s.filter(o=>o!==null)});return(t,a)=>(m(),B("ul",{class:ke(["pagination",ve.value]),role:"menubar","aria-disabled":U(l).disabled,"aria-label":U(l).ariaLabel||void 0,onKeydown:Pe},[(m(!0),B(we,null,De(_e.value,e=>(m(),B("li",A({key:`page-${e.id}`,ref_for:!0},e.li,{ref_for:!0,ref:"_pageElements"}),[e.id===-5||e.id===-6?(m(),B("span",A({key:0,ref_for:!0},M.value.span),[X(t.$slots,"ellipsis-text",{},()=>[Z(j(U(l).ellipsisText||"..."),1)])],16)):(m(),ye(Fe(e.button.is),A({key:1,ref_for:!0},e.button,{onClick:e.clickHandler}),{default:Ve(()=>[X(t.$slots,e.text.name,{disabled:e.text.disabled,page:e.text.page,index:e.text.index,active:e.text.active,content:e.text.value},()=>[Z(j(e.text.value),1)])]),_:2},1040,["onClick"]))],16))),128))],42,Xe))}});export{et as _};
